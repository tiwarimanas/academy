<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" />
  <meta name="renderer" content="webkit" />

  <link rel="stylesheet" href="https://unpkg.com/mdui@2/mdui.css">
  <script src="https://unpkg.com/mdui@2/mdui.global.js"></script>
  <!-- Include the icon's CSS file if using the icon attribute -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <title>MEGABITS</title>
  <style>
    /* Import Google font - Poppins */
    @import url("https://fonts.googleapis.com/css2?family=Lexend");

    * {
      font-family: "Lexend", sans-serif;
    }

    .card-img {
      width: 100%;
      height: 70px;
      object-fit: cover;
      border-radius: var(--mdui-shape-corner-large);

    }

    .card-body {
      padding: 5px;
    }

    .m-0 {
      margin: 0px;
    }
    main{
      margin: 0 1rem;
    }
  </style>
</head>

<body>
  <mdui-navigation-drawer close-on-overlay-click class="nav-drawer">
    <mdui-list>
      <mdui-list-item nonclickable><h1>Megabits</h1></mdui-list-item>
      <mdui-list-item nonclickable><span style="color:rgb(0, 0, 0);">Serving BITS..</span></mdui-list-item>
      <mdui-list-item nonclickable><span style="color:rgb(90, 90, 90); font-size: 13px;">&copy; 2024 Megabits. All rights reserved.</span></mdui-list-item>
      <mdui-list-item nonclickable><mdui-button href="https://forms.gle/DrusjukjaNhaAyg2A#outapp" icon="report" full-width>Report an issue</mdui-button></mdui-list-item>
      <mdui-list-item nonclickable><mdui-button href="privacy.html" icon="privacy_tip" variant="tonal" full-width>Privacy Policy</mdui-button></mdui-list-item>
      <mdui-list-item nonclickable><mdui-button onclick="navDraw(false)" icon="arrow_back" variant="text" full-width>Close</mdui-button></mdui-list-item>
    </mdui-list>
    <!-- <mdui-button>Close Navigation Drawer</mdui-button> -->
  </mdui-navigation-drawer>

  <mdui-top-app-bar style="border-bottom: 1px solid #e0e0e0;">
    <mdui-button-icon icon="menu" onclick="navDraw(true)"></mdui-button-icon>
    <mdui-top-app-bar-title>Home</mdui-top-app-bar-title>
    <div style="flex-grow: 1"></div>
    <!-- <mdui-button-icon icon="more_vert"></mdui-button-icon> -->
  </mdui-top-app-bar>

  <main id="flow">
    
    <mdui-card style="padding:10px; width:100%; display: flex;
    justify-content: center;
    align-items: center;">
      <mdui-circular-progress></mdui-circular-progress>
    </mdui-card>
  
    
  </main>

  <mdui-card variant="outlined" style="width: 100%; border-radius: var(--mdui-shape-corner-large); margin:0.5rem 0;">
    <mdui-list>
        <mdui-list-item nonclickable><h4 class="m-0" style="color:rgb(100, 100, 100);"> Let us know how we're doing...</h4></mdui-list-item>
        <mdui-list-item nonclickable><mdui-button href="https://play.google.com/store/apps/details?id=appinventor.ai_manast2020.GSA2&pcampaignid=web_share#outapp" icon="rate_review">Rate us</mdui-button></mdui-list-item>
      </mdui-list>
  </mdui-card>

  <mdui-snackbar>
  </mdui-snackbar>

</body>

<script>

function Alert(content) {
    const snackbar = document.querySelector("mdui-snackbar");
    snackbar.innerHTML = content;
    snackbar.open = true;
  }

  function navDraw(state) {
    const navigationDrawer = document.querySelector(".nav-drawer");
    navigationDrawer.open = state;
  }

  const flowbox = document.getElementById('flow');
  
      fetch(`https://script.google.com/macros/s/AKfycbyPruocq6hzfBduNC8d69K3JMBaksJVPQ6ls6itY1OCpDdR_uZfNVrucQgPULsNX1vwcQ/exec?sheet=Flow`)
          .then(response => response.json())
          .then(data => {
              console.log(data); // Process the JSON data returned from the API
              // Example: Display data in HTML
              flowbox.innerHTML = "";
              data.forEach(row => {
                  flowbox.innerHTML += `
                  <mdui-card href="flow.html?n=${row.Name}&&q=${row.Code}" clickable style="width: 100%; border-radius: var(--mdui-shape-corner-large); margin-bottom: 0.2rem;">
                    <img class="card-img"
                      src="${row.ImageURL}"
                      alt="IMG">
                
                    <mdui-list-item nonclickable>
                      <h4 class="m-0">${row.Name}</h4> <mdui-chip slot="end-icon">${row.Class}</mdui-chip>
                    </mdui-list-item>
                
                    <mdui-list-item icon="people" class="foo" nonclickable><span style="font-size:13px;">${row.Teacher}</span></mdui-list-item>
                    <mdui-divider middle></mdui-divider>
                    <mdui-list-item icon="access_time_filled" nonclickable><span style="font-size:13px;">${row.Time}</span></mdui-list-item>
                
                  </mdui-card>
            `;
              });
          })
          .catch(error => {
              console.error('Error fetching data:', error);
              Alert("Error fetching data.")
          });
  
  </script>

</html>
